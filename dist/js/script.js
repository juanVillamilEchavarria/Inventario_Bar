const datos={usuario:"",contrasena:""},usuario=document.querySelector("#usuario"),contrasena=document.querySelector("#contrasena"),formulario=document.querySelector(".contenedor-formulario"),botonEnvio=document.querySelector("#botonInicio"),backBody=document.querySelector("body");function mensaje(e){const o=document.createElement("P");o.textContent=e,o.classList.add("avisoFormulario");const n=document.createElement("P");n.textContent="ADVERTENCIA:",n.classList.add("errorFormulario");const t=document.createElement("SVG");t.innerHTML='<svg  xmlns="http://www.w3.org/2000/svg"  width="74"  height="74"  viewBox="0 0 24 24"  fill="none"  stroke="#b61111"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-alert-circle"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0" /><path d="M12 8v4" /><path d="M12 16h.01" /></svg>',t.classList.add("iconoFormulario");const r=document.createElement("BUTTON");r.textContent="Cerrar",r.classList.add("botonFormulario");const a=document.createElement("DIV");a.classList.add("divMensaje"),a.appendChild(t),a.appendChild(n),a.appendChild(o),a.appendChild(r);const c=document.createElement("DIV");c.classList.add("divError"),c.appendChild(a),backBody.classList.add("backError"),backBody.appendChild(c),r.onclick=cerrarMensaje}function cerrarMensaje(){const e=document.querySelector(".divMensaje"),o=document.querySelector(".divError");e&&o&&(e.remove(),o.remove()),e?.remove(),o?.remove()}function correcto(){window.location.href="productos.php"}function resultado(e){datos[e.target.id]=e.target.value,console.log(datos)}function envio(e){e.preventDefault();const{usuario:o,contrasena:n}=datos;if(""===o||""===n)return e.preventDefault(),void mensaje("Para avanzar debes llenar todos los campos");fetch("src/php/funciones/login.php",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(datos)}).then(e=>e.json()).then(e=>{console.log(e.rol),console.log(e.mensaje),e.exito?correcto():(console.log(e.mensaje),mensaje(e.mensaje))}).catch(e=>{console.error("Error en la petición:",e),mensaje("Ocurrió un error al validar")})}botonEnvio.addEventListener("click",envio),usuario.addEventListener("change",resultado),contrasena.addEventListener("change",resultado);